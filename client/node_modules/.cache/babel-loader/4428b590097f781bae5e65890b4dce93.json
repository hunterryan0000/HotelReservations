{"remainingRequest":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\src\\views\\ReservationAddView.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\src\\views\\ReservationAddView.vue","mtime":1680359361297},{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\babel.config.js","mtime":1669561803180},{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680355299326},{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1680355301971},{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680355299326},{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1680355303949}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IExvYWRpbmdTcGlubmVyIGZyb20gIi4uL2NvbXBvbmVudHMvTG9hZGluZ1NwaW5uZXIudnVlIjsgLy9zdGVwIDMuMgoKaW1wb3J0IGhvdGVsU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9Ib3RlbFNlcnZpY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJlc2VydmF0aW9uQWRkVmlldyIsCiAgY29tcG9uZW50czogewogICAgTG9hZGluZ1NwaW5uZXIKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgLy8gdHJ1ZSB0byBpbmRpY2F0ZSBhIGNhbGwgaW4gcHJvZ3Jlc3MKICAgICAgcmVzZXJ2YXRpb246IHt9IC8vIFRoZSByZXNlcnZhdGlvbiB0aGF0IHdpbGwgYmUgYWRkZWQgYnkgdGhpcyB2aWV3CgogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBhZGRSZXNlcnZhdGlvbigpIHsKICAgICAgLy8gU2V0IHRoZSBpbmRpY2F0b3IgdGhhdCBhIGNhbGwgaXMgaW4gcHJvZ3Jlc3MuCiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsgLy8gVE9ETyBzdGVwIDMuMzogVXNlIHRoZSBTZXJ2aWNlIG9iamVjdCB0byBgUE9TVCAvcmVzZXJ2YXRpb25zYC4gV2hlbiBjb21wbGV0ZSwgY2FsbCBsaXN0UmVzZXJ2YXRpb25zIHRvIG5hdmlnYXRlIGJhY2sgdG8gdGhlIGhvdGVsIGRldGFpbHMgdmlldy4gSGFuZGxlIGVycm9ycy4KCiAgICAgIGhvdGVsU2VydmljZS5hZGRSZXNlcnZhdGlvbih0aGlzLnJlc2VydmF0aW9uKS50aGVuKCgpID0+IHsKICAgICAgICAvLyBXaGVuIGRvbmUgKHdoZXRoZXIgc3VjY2VzcyBvciBlcnJvcikgc2V0IHRoZSBpbmRpY2F0b3IgdGhhdCB0aGUgY2FsbCBpcyBjb21wbGV0ZS4KICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgIHRoaXMubGlzdFJlc2VydmF0aW9ucygpOyAvL25hdmlnYXRlIGJhY2sgdG8gbGlzdAogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PSA0MDQpIHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBhbGVydChlcnJvcik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgbGlzdFJlc2VydmF0aW9ucygpIHsKICAgICAgLy8gTmF2aWdhdGUgdG8gdGhlIEhvdGVsIERldGFpbHMgcGFnZSwgd2l0aCBhIHBhcmFtZXRlciB0aGF0IHNheXMgdG8gZGlzcGxheSByZXNlcnZhdGlvbnMgdG9vLgogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogImhvdGVsIiwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGlkOiB0aGlzLnJlc2VydmF0aW9uLmhvdGVsSWQKICAgICAgICB9LAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBzaG93UmVzOiB0cnVlCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgZGF0ZUFzU3RyaW5nKGRheXNGcm9tVG9kYXkgPSAwKSB7CiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTsKICAgICAgcmV0dXJuIG5ldyBEYXRlKHRvZGF5LmdldEZ1bGxZZWFyKCksIHRvZGF5LmdldE1vbnRoKCksIHRvZGF5LmdldERhdGUoKSArIGRheXNGcm9tVG9kYXkpLnRvSVNPU3RyaW5nKCkuc3BsaXQoIlQiKVswXTsKICAgIH0KCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIC8vIENyZWF0ZSBhICJzdGFydGluZyIgcmVzZXJ2YXRpb24gd2l0aCBkZWZhdWx0IHZhbHVlcyB0byBiZWdpbi4KICAgIHRoaXMucmVzZXJ2YXRpb24gPSB7CiAgICAgIGlkOiAwLAogICAgICBob3RlbElkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaG90ZWxJZCwKICAgICAgZnVsbE5hbWU6ICIiLAogICAgICBjaGVja2luRGF0ZTogdGhpcy5kYXRlQXNTdHJpbmcoMSksCiAgICAgIGNoZWNrb3V0RGF0ZTogdGhpcy5kYXRlQXNTdHJpbmcoMiksCiAgICAgIGd1ZXN0czogMgogICAgfTsKICB9Cgp9Ow=="},{"version":3,"mappings":"AAuDA,8D,CACA;;AACA;AACA;EACAA,0BADA;EAEAC;IACAC;EADA,CAFA;;EAKAC;IACA;MACAC,gBADA;MACA;MACAC,eAFA,CAEA;;IAFA;EAIA,CAVA;;EAYAC;IACAC;MACA;MACA,sBAFA,CAIA;;MACAC,aACAD,cADA,CACA,gBADA,EAEAE,IAFA,CAEA;QACA;QACA;QACA,wBAHA,CAGA;MACA,CANA,EAOAC,KAPA,CAOAC;QACA;UACA;UACAC;QACA;MACA,CAZA;IAaA,CAnBA;;IAqBAC;MACA;MACA;QACAb,aADA;QAEAc;UAAAC;QAAA,CAFA;QAGAC;UAAAC;QAAA;MAHA;IAKA,CA5BA;;IA6BAC;MACA;MACA,gBACAC,mBADA,EAEAA,gBAFA,EAGAA,+BAHA,EAKAC,WALA,GAMAC,KANA,CAMA,GANA,EAMA,CANA;IAOA;;EAtCA,CAZA;;EAqDAC;IACA;IACA;MACAP,KADA;MAEAQ,mCAFA;MAGAC,YAHA;MAIAC,iCAJA;MAKAC,kCALA;MAMAC;IANA;EAQA;;AA/DA","names":["name","components","LoadingSpinner","data","isLoading","reservation","methods","addReservation","hotelService","then","catch","error","alert","listReservations","params","id","query","showRes","dateAsString","today","toISOString","split","created","hotelId","fullName","checkinDate","checkoutDate","guests"],"sourceRoot":"src/views","sources":["ReservationAddView.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <div id=\"heading-line\">\n      <h1>\n        Add Reservation\n        <loading-spinner id=\"spinner\" v-bind:spin=\"isLoading\" />\n      </h1>\n    </div>\n    <hr />\n    <form v-on:submit.prevent=\"addReservation\">\n      <fieldset>\n        <label for=\"fullName\">Full name: </label>\n        <input\n          type=\"text\"\n          name=\"fullName\"\n          id=\"fullName\"\n          v-model=\"reservation.fullName\"\n        />\n      </fieldset>\n      <fieldset>\n        <label for=\"checkinDate\">Checkin date: </label>\n        <input\n          type=\"date\"\n          name=\"checkinDate\"\n          id=\"checkinDate\"\n          v-model=\"reservation.checkinDate\"\n        />\n      </fieldset>\n      <fieldset>\n        <label for=\"checkoutDate\">Checkout date: </label>\n        <input\n          type=\"date\"\n          name=\"checkoutDate\"\n          id=\"checkoutDate\"\n          v-model=\"reservation.checkoutDate\"\n        />\n      </fieldset>\n      <fieldset>\n        <label for=\"guests\">Number of guests: </label>\n        <input\n          type=\"number\"\n          min=\"1\"\n          max=\"5\"\n          name=\"guests\"\n          id=\"guests\"\n          v-model=\"reservation.guests\"\n        />\n      </fieldset>\n    </form>\n    <button v-on:click=\"addReservation\">Add</button>&nbsp;\n    <button v-on:click=\"listReservations\">Cancel</button>\n  </div>\n</template>\n\n<script>\nimport LoadingSpinner from \"../components/LoadingSpinner.vue\";\n//step 3.2\nimport hotelService from \"../services/HotelService\";\nexport default {\n  name: \"ReservationAddView\",\n  components: {\n    LoadingSpinner,\n  },\n  data() {\n    return {\n      isLoading: false, // true to indicate a call in progress\n      reservation: {}, // The reservation that will be added by this view\n    };\n  },\n\n  methods: {\n    addReservation() {\n      // Set the indicator that a call is in progress.\n      this.isLoading = true;\n\n      // TODO step 3.3: Use the Service object to `POST /reservations`. When complete, call listReservations to navigate back to the hotel details view. Handle errors.\n      hotelService\n        .addReservation(this.reservation)\n        .then(() => {\n      // When done (whether success or error) set the indicator that the call is complete.\n      this.isLoading = false;\n      this.listReservations(); //navigate back to list\n      })\n        .catch(error => {\n        if (error.response.status == 404) {\n          this.isLoading = false;\n          alert(error);\n        }\n      });\n    },\n\n    listReservations() {\n      // Navigate to the Hotel Details page, with a parameter that says to display reservations too.\n      this.$router.push({\n        name: \"hotel\",\n        params: { id: this.reservation.hotelId },\n        query: { showRes: true },\n      });\n    },\n    dateAsString(daysFromToday = 0) {\n      const today = new Date();\n      return new Date(\n        today.getFullYear(),\n        today.getMonth(),\n        today.getDate() + daysFromToday\n      )\n        .toISOString()\n        .split(\"T\")[0];\n    },\n  },\n\n  created() {\n    // Create a \"starting\" reservation with default values to begin.\n    this.reservation = {\n      id: 0,\n      hotelId: this.$route.params.hotelId,\n      fullName: \"\",\n      checkinDate: this.dateAsString(1),\n      checkoutDate: this.dateAsString(2),\n      guests: 2,\n    };\n  },\n};\n</script>\n\n<style scoped>\nfieldset {\n  border: none;\n}\nfieldset > label {\n  display: inline-block;\n  width: 180px;\n}\n</style>"]}]}