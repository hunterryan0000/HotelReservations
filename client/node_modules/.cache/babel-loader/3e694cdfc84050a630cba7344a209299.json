{"remainingRequest":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\src\\views\\HotelDetailsView.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\src\\views\\HotelDetailsView.vue","mtime":1680358847132},{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\babel.config.js","mtime":1669561803180},{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680355299326},{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1680355301971},{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680355299326},{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1680355303949}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHV0aWxpdHkgZnJvbSAiLi4vc2VydmljZXMvdXRpbGl0eSI7CmltcG9ydCBMb2FkaW5nU3Bpbm5lciBmcm9tICIuLi9jb21wb25lbnRzL0xvYWRpbmdTcGlubmVyLnZ1ZSI7CmltcG9ydCBSZXNlcnZhdGlvbkRldGFpbHMgZnJvbSAiLi4vY29tcG9uZW50cy9SZXNlcnZhdGlvbkRldGFpbHMudnVlIjsgLy9zdGVwIDIuMgoKaW1wb3J0IGhvdGVsU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9Ib3RlbFNlcnZpY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTG9hZGluZ1NwaW5uZXIsCiAgICBSZXNlcnZhdGlvbkRldGFpbHMKICB9LAogIG5hbWU6ICJIb3RlbERldGFpbHNWaWV3IiwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGhvdGVsOiB7CiAgICAgICAgYWRkcmVzczoge30KICAgICAgfSwKICAgICAgLy8gVGhlIHNpbmdsZSBob3RlbCBvYmplY3QgZGlzcGxheWVkIGluIHRoaXMgdmlldwogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICAvLyB0cnVlIHRvIGluZGljYXRlIGEgY2FsbCBpbiBwcm9ncmVzcwogICAgICByZXNlcnZhdGlvbnM6IG51bGwsCiAgICAgIC8vIFRoZSBsaXN0IG9mIHJlc2VydmF0aW9ucyBmb3IgdGhpcyBob3RlbC4KICAgICAgc2hvd1JlczogZmFsc2UgLy8gVGhlIHVzZXIgcmVxdWVzdGVkIHRvIHZpZXcgcmVzZXJ2YXRpb25zCgogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICAvKioqCiAgICAgKiBHZXQgYSBzaW5nbGUgaG90ZWwgZnJvbSB0aGUgQVBJLgogICAgICovCiAgICBnZXRIb3RlbChpZCkgewogICAgICBjb25zb2xlLmxvZyhpZCk7IC8vIHByZXZlbnRzIGEgIm5vLXVudXNlZC12YXJzIiBlcnJvcgogICAgICAvLyBTZXQgdGhlIGluZGljYXRvciB0aGF0IGEgY2FsbCBpcyBpbiBwcm9ncmVzcy4KCiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsgLy8gVE9ETyAyLjM6IFVzZSB0aGUgU2VydmljZSBvYmplY3QgdG8gYEdFVCAvaG90ZWxzL3tpZH1gLiBTZXQgdGhlIGJvZHkgb2YgdGhlIHJlc3VsdCB0byBgdGhpcy5ob3RlbGAuIEhhbmRsZSBlcnJvcnMuCgogICAgICBob3RlbFNlcnZpY2UuZ2V0SG90ZWxCeUlkKGlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmhvdGVsID0gcmVzcG9uc2UuZGF0YTsgLy8gV2hlbiBkb25lICh3aGV0aGVyIHN1Y2Nlc3Mgb3IgZXJyb3IpIHNldCB0aGUgaW5kaWNhdG9yIHRoYXQgdGhlIGNhbGwgaXMgY29tcGxldGUuCgogICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7IC8vIGlmICh0aGlzLnNob3dSZXMpIHsKICAgICAgICAvLyAgICAgICB0aGlzLmdldFJlc2VydmF0aW9ucygpOwogICAgICAgIC8vICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09IDQwNCkgewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGFsZXJ0KGVycm9yKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBnZXRSZXNlcnZhdGlvbnMoKSB7CiAgICAgIHZhciBfdGhpcyRob3RlbDsKCiAgICAgIC8vIFRoZSAiPyIgaW4gInRoaXMuaG90ZWw/LmlkIiByZXR1cm5zIGEgYG51bGxgIGlmIGBob3RlbGAgaXMgbnVsbCBvciB1bmRlZmluZWQsCiAgICAgIC8vIGluc3RlYWQgb2YgdGhyb3dpbmcgYW4gZXJyb3IuIFRoaXMgaXMgY2FsbGVkIHRoZSBvcHRpb25hbCBjaGFpbmluZyBvcGVyYXRvci4KICAgICAgaWYgKCEoKF90aGlzJGhvdGVsID0gdGhpcy5ob3RlbCkgIT09IG51bGwgJiYgX3RoaXMkaG90ZWwgIT09IHZvaWQgMCAmJiBfdGhpcyRob3RlbC5pZCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gU2V0IHRoZSBpbmRpY2F0b3IgdGhhdCBhIGNhbGwgaXMgaW4gcHJvZ3Jlc3MuCgoKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOyAvLyBUT0RPIDIuNDogVXNlIHRoZSBTZXJ2aWNlIG9iamVjdCB0byBgR0VUIC9ob3RlbHMve2lkfS9yZXNlcnZhdGlvbnNgLiBTZXQgdGhlIGJvZHkgb2YgdGhlIHJlc3VsdCB0byBgdGhpcy5yZXNlcnZhdGlvbnNgLiBIYW5kbGUgZXJyb3JzLgoKICAgICAgaG90ZWxTZXJ2aWNlLmdldFJlc2VydmF0aW9uc0J5SG90ZWwodGhpcy5ob3RlbC5pZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5yZXNlcnZhdGlvbnMgPSByZXNwb25zZS5kYXRhOyAvLyBXaGVuIGRvbmUgKHdoZXRoZXIgc3VjY2VzcyBvciBlcnJvcikgc2V0IHRoZSBpbmRpY2F0b3IgdGhhdCB0aGUgY2FsbCBpcyBjb21wbGV0ZS4KCiAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT0gNDA0KSB7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgYWxlcnQoZXJyb3IpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIGZvcm1hdEN1cnJlbmN5KHZhbHVlKSB7CiAgICAgIHJldHVybiB1dGlsaXR5LmZvcm1hdEN1cnJlbmN5KHZhbHVlKTsKICAgIH0KCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIC8vIElmIHRoaXMgcGFnZSB3YXMgY2FsbGVkIHdpdGggIj9zaG93UmVzPXRydWUiIGFzIGEgcXVlcnkgc3RyaW5nLCBhdXRvbWF0aWNhbGx5IGdldCB0aGUgcmVzZXJ2YXRpb25zIHdoZW4gdGhlIHBhZ2UgaXMgbG9hZGVkLgogICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnNob3dSZXMpIHsKICAgICAgdGhpcy5zaG93UmVzID0gdHJ1ZTsKICAgIH0gLy8gRmV0Y2ggdGhlIGhvdGVsIGJhc2VkIG9uIHRoZSBwYXRoIHBhcmFtZXRlcgoKCiAgICB0aGlzLmdldEhvdGVsKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCk7CiAgfQoKfTs="},{"version":3,"mappings":"AA2FA;AACA;AACA,sE,CACA;;AACA;AACA;EACAA;IAAAC;IAAAC;EAAA,CADA;EAEAC,wBAFA;;EAGAC;IACA;MACAC;QACAC;MADA,CADA;MAGA;MACAC,gBAJA;MAIA;MACAC,kBALA;MAKA;MACAC,cANA,CAMA;;IANA;EAQA,CAZA;;EAaAC;IACA;AACA;AACA;IACAC;MACAC,gBADA,CACA;MACA;;MACA,sBAHA,CAKA;;MACAC,aACAC,YADA,CACAC,EADA,EAEAC,IAFA,CAEAC;QACA,2BADA,CAEA;;QACA,uBAHA,CAIA;QACA;QACA;MACA,CATA,EAUAC,KAVA,CAUAC;QACA;UACA;UACAC;QACA;MACA,CAfA;IAgBA,CA1BA;;IA2BAC;MAAA;;MACA;MACA;MACA;QACA;MACA,CALA,CAOA;;;MACA,sBARA,CAUA;;MACAR,aACAS,sBADA,CACA,aADA,EAEAN,IAFA,CAEAC;QACA,kCADA,CAEA;;QACA;MACA,CANA,EAOAC,KAPA,CAOAC;QACA;UACA;UACAC;QACA;MACA,CAZA;IAaA,CAnDA;;IAoDAG;MACA;IACA;;EAtDA,CAbA;;EAqEAC;IACA;IACA;MACA;IACA,CAJA,CAKA;;;IACA;EACA;;AA5EA","names":["components","LoadingSpinner","ReservationDetails","name","data","hotel","address","isLoading","reservations","showRes","methods","getHotel","console","hotelService","getHotelById","id","then","response","catch","error","alert","getReservations","getReservationsByHotel","formatCurrency","created"],"sourceRoot":"src/views","sources":["HotelDetailsView.vue"],"sourcesContent":["<template>\n  <div>\n    <div id=\"heading-line\">\n      <img\n        id=\"hotel-image\"\n        v-bind:src=\"'/images/' + hotel.coverImage\"\n        alt=\"Hotel photo\"\n      />\n      <h1>\n        {{ hotel.name }}\n        <loading-spinner id=\"spinner\" v-bind:spin=\"isLoading\" />\n      </h1>\n    </div>\n    <section id=\"hotel-details\">\n      <header>Address</header>\n      <article>\n        {{ hotel.address.address }}<br />\n        {{ hotel.address.address2 }}<br v-if=\"hotel.address.address2\" />\n        {{ hotel.address.city }}<br />\n        {{ hotel.address.state }}<br />\n        {{ hotel.address.zip }}\n      </article>\n      <header>Cost</header>\n      <article>{{ formatCurrency(hotel.costPerNight) }} per night</article>\n      <header>Capacity</header>\n      <article>{{ hotel.roomsAvailable }} rooms</article>\n      <header>Rating</header>\n      <article>\n        <img\n          class=\"rating-star\"\n          v-for=\"n in hotel.stars\"\n          v-bind:key=\"n\"\n          src=\"/images/star.png\"\n          alt=\"Stars\"\n          v-bind:title=\"hotel.stars + ' stars'\"\n        />\n      </article>\n    </section>\n\n    <section id=\"hotel-reservations\">\n      <a v-if=\"!reservations\" href=\"#\" v-on:click.prevent=\"getReservations\"\n        >Show hotel reservations</a\n      >\n      <div id=\"reservations\" v-else>\n        <h2>Reservations</h2>\n        <p>\n          <em\n            >{{ reservations.length }} reservation{{\n              reservations.length == 1 ? \"\" : \"s\"\n            }}\n            found</em\n          >\n        </p>\n        <router-link\n          v-bind:to=\"{ name: 'add-reservation', params: { hotelId: hotel.id } }\"\n          >Book new reservation</router-link\n        >\n        <article\n          id=\"reservation-list\"\n          v-for=\"res in reservations\"\n          v-bind:key=\"res.id\"\n        >\n          <hr />\n          <reservation-details\n            id=\"reservation-details\"\n            v-bind:reservation=\"res\"\n          />\n          <router-link\n            v-bind:to=\"{\n              name: 'update-reservation',\n              params: { id: res.id },\n            }\"\n            ><font-awesome-icon\n              icon=\"fa-solid fa-pen-to-square\"\n              class=\"fa-icon\"\n          /></router-link>\n          <router-link\n            v-bind:to=\"{\n              name: 'delete-reservation',\n              params: { id: res.id },\n            }\"\n          >\n            <font-awesome-icon icon=\"fa-solid fa-trash-can\" class=\"fa-icon\"\n          /></router-link>\n        </article>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport utility from \"../services/utility\";\nimport LoadingSpinner from \"../components/LoadingSpinner.vue\";\nimport ReservationDetails from \"../components/ReservationDetails.vue\";\n//step 2.2\nimport hotelService from \"../services/HotelService\";\nexport default {\n  components: { LoadingSpinner, ReservationDetails },\n  name: \"HotelDetailsView\",\n  data() {\n    return {\n      hotel: {\n        address: {},\n      }, // The single hotel object displayed in this view\n      isLoading: false, // true to indicate a call in progress\n      reservations: null, // The list of reservations for this hotel.\n      showRes: false, // The user requested to view reservations\n    };\n  },\n  methods: {\n    /***\n     * Get a single hotel from the API.\n     */\n    getHotel(id) {\n      console.log(id);  // prevents a \"no-unused-vars\" error\n      // Set the indicator that a call is in progress.\n      this.isLoading = true;\n\n      // TODO 2.3: Use the Service object to `GET /hotels/{id}`. Set the body of the result to `this.hotel`. Handle errors.\n      hotelService\n        .getHotelById(id)\n        .then((response) => {\n          this.hotel = response.data;\n      // When done (whether success or error) set the indicator that the call is complete.\n      this.isLoading = false;\n      // if (this.showRes) {\n      //       this.getReservations();\n      //     }\n        })\n        .catch(error => {\n        if (error.response.status == 404) {\n          this.isLoading = false;\n          alert(error);\n        }\n      });\n    },\n    getReservations() {\n      // The \"?\" in \"this.hotel?.id\" returns a `null` if `hotel` is null or undefined,\n      // instead of throwing an error. This is called the optional chaining operator.\n      if (!this.hotel?.id) {\n        return;\n      }\n\n      // Set the indicator that a call is in progress.\n      this.isLoading = true;\n\n      // TODO 2.4: Use the Service object to `GET /hotels/{id}/reservations`. Set the body of the result to `this.reservations`. Handle errors.\n      hotelService\n        .getReservationsByHotel(this.hotel.id)\n        .then((response) => {\n          this.reservations = response.data;\n      // When done (whether success or error) set the indicator that the call is complete.\n      this.isLoading = false;\n        })\n        .catch(error => {\n        if (error.response.status == 404) {\n          this.isLoading = false;\n          alert(error);\n        }\n      });\n    },\n    formatCurrency(value) {\n      return utility.formatCurrency(value);\n    },\n  },\n  created() {\n    // If this page was called with \"?showRes=true\" as a query string, automatically get the reservations when the page is loaded.\n    if (this.$route.query.showRes) {\n      this.showRes = true;\n    }\n    // Fetch the hotel based on the path parameter\n    this.getHotel(this.$route.params.id);\n  },\n};\n</script>\n\n<style scoped>\n#reservation-details {\n  display: inline-block;\n}\n\n#heading-line {\n  display: flex;\n  align-items: center;\n}\n\n#hotel-details {\n  display: grid;\n  grid-template-columns: 200px auto;\n  padding: 10px 30px;\n  row-gap: 20px;\n}\n\n#hotel-reservations {\n  padding: 10px 30px;\n}\n\n#hotel-details > * {\n  border-top: 1px solid rgb(175, 175, 175);\n  padding-top: 15px;\n}\n\n#hotel-image {\n  max-height: 100px;\n}\n\nsection > header {\n  font-size: 1.1rem;\n  font-weight: bolder;\n}\n\nimg.rating-star {\n  height: 50px;\n}\n\n.fa-icon {\n  font-size: 1.4rem;\n  margin-right: 8px;\n}\n</style>"]}]}