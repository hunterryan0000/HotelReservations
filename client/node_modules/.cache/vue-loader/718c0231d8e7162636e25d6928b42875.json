{"remainingRequest":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\src\\views\\ReservationDeleteView.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\src\\views\\ReservationDeleteView.vue","mtime":1680361231558},{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680355299326},{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1680355301971},{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680355299326},{"path":"C:\\Users\\Student\\workspace\\HotelReservations\\exercise\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1680355303949}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBMb2FkaW5nU3Bpbm5lciBmcm9tICIuLi9jb21wb25lbnRzL0xvYWRpbmdTcGlubmVyLnZ1ZSI7CmltcG9ydCBSZXNlcnZhdGlvbkRldGFpbHMgZnJvbSAiLi4vY29tcG9uZW50cy9SZXNlcnZhdGlvbkRldGFpbHMudnVlIjsKLy9zdGVwIDUuMgppbXBvcnQgaG90ZWxTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0hvdGVsU2VydmljZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmVzZXJ2YXRpb25EZWxldGVWaWV3IiwKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nU3Bpbm5lciwKICAgIFJlc2VydmF0aW9uRGV0YWlscywKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc0xvYWRpbmc6IGZhbHNlLCAvLyB0cnVlIHRvIGluZGljYXRlIGEgY2FsbCBpbiBwcm9ncmVzcwogICAgICByZXNlcnZhdGlvbjoge30sIC8vIHRoZSByZXNlcnZhdGlvbiB0byBiZSBkZWxldGVkIGJ5IHRoaXMgdmlldwogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBnZXRSZXNlcnZhdGlvbihpZCkgewogICAgICBjb25zb2xlLmxvZyhpZCk7IC8vIHByZXZlbnRzIGEgIm5vLXVudXNlZC12YXJzIiBlcnJvcgogICAgICAvLyBTZXQgdGhlIGluZGljYXRvciB0aGF0IGEgY2FsbCBpcyBpbiBwcm9ncmVzcy4KICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwoKICAgICAgLy8gVE9ETyA1LjM6IFVzZSB0aGUgU2VydmljZSBvYmplY3QgdG8gYEdFVCAvcmVzZXJ2YXRpb25zL3tpZH1gLiBTZXQgdGhlIGJvZHkgb2YgdGhlIHJlc3VsdCB0byBgdGhpcy5yZXNlcnZhdGlvbmAuIEhhbmRsZSBlcnJvcnMuCiAgICAgIGhvdGVsU2VydmljZQogICAgICAgIC5nZXRSZXNlcnZhdGlvbkJ5SWQoaWQpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLnJlc2VydmF0aW9uID0gcmVzcG9uc2UuZGF0YTsKICAgICAgLy8gV2hlbiBkb25lICh3aGV0aGVyIHN1Y2Nlc3Mgb3IgZXJyb3IpIHNldCB0aGUgaW5kaWNhdG9yIHRoYXQgdGhlIGNhbGwgaXMgY29tcGxldGUuCiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pCiAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PSA0MDQpIHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBhbGVydChlcnJvcik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVSZXNlcnZhdGlvbigpIHsKICAgICAgLy8gU2V0IHRoZSBpbmRpY2F0b3IgdGhhdCBhIGNhbGwgaXMgaW4gcHJvZ3Jlc3MuCiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKCiAgICAgIC8vIFRPRE8gNS40OiBVc2UgdGhlIFNlcnZpY2Ugb2JqZWN0IHRvIGBERUxFVEUgL3Jlc2VydmF0aW9ucy97aWR9YC4gV2hlbiBkb25lLCBjYWxsIGxpc3RSZXNlcnZhdGlvbnMoKSB0byBuYXZpZ2F0ZSB0byBIb3RlbCBEZXRhaWxzLiBIYW5kbGUgZXJyb3JzLgogICAgICBob3RlbFNlcnZpY2UKICAgICAgICAuZGVsZXRlUmVzZXJ2YXRpb24odGhpcy5yZXNlcnZhdGlvbi5pZCkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgIC8vIFdoZW4gZG9uZSAod2hldGhlciBzdWNjZXNzIG9yIGVycm9yKSBzZXQgdGhlIGluZGljYXRvciB0aGF0IHRoZSBjYWxsIGlzIGNvbXBsZXRlLgogICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICB0aGlzLmxpc3RSZXNlcnZhdGlvbnMoKTsKICAgICAgfSkKICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09IDQwNCkgewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGFsZXJ0KGVycm9yKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBsaXN0UmVzZXJ2YXRpb25zKCkgewogICAgICAvLyBOYXZpZ2F0ZSB0byB0aGUgSG90ZWwgRGV0YWlscyBwYWdlLCB3aXRoIGEgcGFyYW1ldGVyIHRoYXQgc2F5cyB0byBkaXNwbGF5IHJlc2VydmF0aW9ucyB0b28uCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAiaG90ZWwiLAogICAgICAgIHBhcmFtczogeyBpZDogdGhpcy5yZXNlcnZhdGlvbi5ob3RlbElkIH0sCiAgICAgICAgcXVlcnk6IHsgc2hvd1JlczogdHJ1ZSB9LAogICAgICB9KTsKICAgIH0sCiAgfSwKCiAgLy8gVE9ETyA1LjU6IENyZWF0ZSBhIFZ1ZSBMaWZlY3ljbGUgaG9vayBmdW5jdGlvbiB3aGljaCBjYWxscyBgdGhpcy5nZXRSZXNlcnZhdGlvbigpYCwgcGFzc2luZyBpbiB0aGUgYGlkYCBwYXRoIHBhcmFtZXRlci4KY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0UmVzZXJ2YXRpb24odGhpcy4kcm91dGUucGFyYW1zLmlkKTsKICB9LAp9Owo="},{"version":3,"sources":["ReservationDeleteView.vue"],"names":[],"mappings":";AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ReservationDeleteView.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home\">\n    <div id=\"heading-line\">\n      <h1>\n        Delete Reservation\n        <loading-spinner id=\"spinner\" v-bind:spin=\"isLoading\" />\n      </h1>\n    </div>\n    <reservation-details v-bind:reservation=\"reservation\" />\n    <hr />\n    Are you sure you want to delete this reservation?<br /><br />\n    <button id=\"delete-button\" v-on:click=\"deleteReservation\">\n      <font-awesome-icon icon=\"fa-solid fa-trash-can\" /> Delete</button\n    >&nbsp;\n    <button v-on:click=\"listReservations\">Cancel</button>\n  </div>\n</template>\n\n<script>\nimport LoadingSpinner from \"../components/LoadingSpinner.vue\";\nimport ReservationDetails from \"../components/ReservationDetails.vue\";\n//step 5.2\nimport hotelService from \"../services/HotelService\";\nexport default {\n  name: \"ReservationDeleteView\",\n  components: {\n    LoadingSpinner,\n    ReservationDetails,\n  },\n  data() {\n    return {\n      isLoading: false, // true to indicate a call in progress\n      reservation: {}, // the reservation to be deleted by this view\n    };\n  },\n\n  methods: {\n    getReservation(id) {\n      console.log(id); // prevents a \"no-unused-vars\" error\n      // Set the indicator that a call is in progress.\n      this.isLoading = true;\n\n      // TODO 5.3: Use the Service object to `GET /reservations/{id}`. Set the body of the result to `this.reservation`. Handle errors.\n      hotelService\n        .getReservationById(id)\n        .then((response) => {\n          this.reservation = response.data;\n      // When done (whether success or error) set the indicator that the call is complete.\n      this.isLoading = false;\n      })\n      .catch(error => {\n        if (error.response.status == 404) {\n          this.isLoading = false;\n          alert(error);\n        }\n      });\n    },\n    deleteReservation() {\n      // Set the indicator that a call is in progress.\n      this.isLoading = true;\n\n      // TODO 5.4: Use the Service object to `DELETE /reservations/{id}`. When done, call listReservations() to navigate to Hotel Details. Handle errors.\n      hotelService\n        .deleteReservation(this.reservation.id)\n        .then(() => {\n      // When done (whether success or error) set the indicator that the call is complete.\n      this.isLoading = false;\n      this.listReservations();\n      })\n      .catch(error => {\n        if (error.response.status == 404) {\n          this.isLoading = false;\n          alert(error);\n        }\n      });\n    },\n\n    listReservations() {\n      // Navigate to the Hotel Details page, with a parameter that says to display reservations too.\n      this.$router.push({\n        name: \"hotel\",\n        params: { id: this.reservation.hotelId },\n        query: { showRes: true },\n      });\n    },\n  },\n\n  // TODO 5.5: Create a Vue Lifecycle hook function which calls `this.getReservation()`, passing in the `id` path parameter.\ncreated() {\n    this.getReservation(this.$route.params.id);\n  },\n};\n</script>\n\n<style scoped>\n#delete-button:hover {\n  color: red;\n}\n</style>"]}]}